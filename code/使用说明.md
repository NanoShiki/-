# 使用说明
编译运行请在Windows10或Windows11系统下进行，如果使用本地g++编译失败可以考虑使用mingw64/bin目录下的g++.exe进行编译。  
手动编译链接时注意终端路径要在源代码路径下，使用以下指令进行编译，前2条指令将源文件编译成.o文件，第3条指令将.o文件链接成可执行文件。
```shell
g++ external_sort.cpp -c
g++ reader.cpp -c
g++ main.o external_sort.o reader.o -o sort.exe
```
然后运行可执行文件
```shell
sort.exe
```
运行完成后终端会提示排序是否正确以及得分，并生成score.data文件。

main函数已经包含在main.o中，请不要在external_sort.cpp中定义main函数，只需要实现ExternalSort函数即可，头文件可以自行添加。  
main函数体如下所示
```cpp
int main() {
    std::string intput_file_name = "unsorted.input";
    GenerateNumbers(intput_file_name);
    unsigned long long memory_cost = 0;
    HANDLE handle = GetCurrentProcess();
    PROCESS_MEMORY_COUNTERS pmc;
    bool sort_end = false;
    std::ifstream input(intput_file_name);
    std::thread monitor([&memory_cost, &handle, &pmc, &sort_end](){
        while (!sort_end) {
            GetProcessMemoryInfo(handle, &pmc, sizeof(pmc));
            memory_cost = std::max(memory_cost, pmc.WorkingSetSize);
        }
    });
    std::string output_file_name = ExternalSort(input);
    sort_end = true;
    monitor.join();
    if (Check(intput_file_name, output_file_name)) {
        std::cerr << "Sorting result correct.\n";
        std::cerr << "Memory cost: " << memory_cost / 1024. / 1024. << " MB\n";
        auto score = CalcScore(memory_cost);
        std::cerr << "Score: " << score << '\n';
        OutputScore(score);
    } else {
        std::cerr << "External sorting failed. Please fix your code.\n";
        OutputScore(0);
    }
    return 0;
}

```